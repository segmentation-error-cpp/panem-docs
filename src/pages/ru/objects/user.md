---
title: Пользователь
description: Объект пользователя
layout: ../../../layouts/MainLayout.astro
---

## Инфо

Пользователь как и все  моедли представляет из себя некую *структуру данных / таблицу* в основной базе данных.
Пользователь является ключевым объектом данных в работе Panem'ы. Поэтому для этой структуры данных имеется ряд
особенностей примененния и рекомендации по поддержке.

## Аутентификация

Вход пользователя построен на [JWT](https://jwt.io/). Это упрощает оборот данных, избавляя нас от токенов
сессии и возможность анонимного взлома. Однако, при их использовании есть ряд моментов, которые стоит учитывать.
Более о таких моментах расписано в секции [безопасность](#Безопасность).

## Безопасность

JWT безопасен для реализации в современных реалиях. Однако есть как явные плюсы, так и минусы. Вот список
доступных атак с примененнием JWT:

* Перехват JWT
* Подмена контента (payload) JWT
* Взлом ключа дешифровки

Все эти проблемы (за исключением первой) решаются на серверной части. Они имеют весьма простое решение.
Более подробно о решении каждой из них описано ниже.

### Перехват JWT

Фактически, это та же проблема безопасности, что и кража куки файлов. Она решается рядом заголовков
и свойств куки файлов, устанавливаемых на серверной стороне. Приложение (Frontend) в этой ситуации
ставит кеш отметку на полгода (сентябрь-январь, январь-июнь, июнь-январь). Это сделанно для очистки
браузера
от проблем с производительностью.

Для защиты от перехвата JWT токена, применяется токен доверия. Этот токен находится на форме входа
и защищает пользователей от *недобросовестного пользователя*, который хочет подменить сессию.
Он сформирован на основе MD5 и 16 ключа, который сгенерирован случайным образом на сервере и подставлен
в определённым месте на этапе развёртывания.

Чтобы его не получать путём просмотра DOM, реализован следующий механизм:

* DOM до нажатия кнопки войти

```html
<form>
    <input placeholder="Login" type="text">
    <input placeholder="Password" type="password">
    <button>Вход</button>
</form>
```

* DOM после нажатия и в момент отправки запроса

```html
<form>
    <input name="csrf" token="qwerty123:MD5HASH" type="hidden">
    <input placeholder="Login" type="text">
    <input placeholder="Password" type="password">
    <button>Вход</button>
</form>
```
